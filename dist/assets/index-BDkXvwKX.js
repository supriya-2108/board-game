import{r as v,a as z,R as J}from"./react-vendor-DghaKJPf.js";import{P as S,a as b,G as w,b as C,D as M,c as X}from"./game-logic-DjUrrTGZ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function d(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=d(o);fetch(o.href,r)}})();var L={exports:{}},_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z=v,ee=Symbol.for("react.element"),te=Symbol.for("react.fragment"),se=Object.prototype.hasOwnProperty,oe=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,re={key:!0,ref:!0,__self:!0,__source:!0};function O(t,s,d){var n,o={},r=null,m=null;d!==void 0&&(r=""+d),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(m=s.ref);for(n in s)se.call(s,n)&&!re.hasOwnProperty(n)&&(o[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)o[n]===void 0&&(o[n]=s[n]);return{$$typeof:ee,type:t,key:r,ref:m,props:o,_owner:oe.current}}_.Fragment=te;_.jsx=O;_.jsxs=O;L.exports=_;var e=L.exports,G={},$=z;G.createRoot=$.createRoot,G.hydrateRoot=$.hydrateRoot;const ne=({piece:t,onDragStart:s,onDragEnd:d})=>{const n=i=>{s&&s(t)},o=()=>{d&&d()},r=i=>{s&&s(t)},m=(i,h)=>({[S.PAWN]:h===b.PLAYER_1?"♙":"♟",[S.KNIGHT]:h===b.PLAYER_1?"♘":"♞",[S.BISHOP]:h===b.PLAYER_1?"♗":"♝",[S.QUEEN]:h===b.PLAYER_1?"♕":"♛"})[i],p=`piece player-${t.owner}`;return e.jsx("div",{className:p,draggable:!0,onDragStart:n,onDragEnd:o,onTouchStart:r,children:m(t.type,t.owner)})},ae=({position:t,piece:s,isLight:d,isValidMove:n,isSelected:o,onClick:r,onPieceDragStart:m,onPieceDragEnd:p,onDrop:i})=>{const h=()=>{r&&r(t)},a=f=>{f.preventDefault()},g=f=>{f.preventDefault(),i&&i(t)},c=f=>{if(!f.changedTouches[0])return;const y=f.changedTouches[0],x=document.elementFromPoint(y.clientX,y.clientY);if(x&&x.classList.contains("square")){const E=parseInt(x.getAttribute("data-row")||"0"),R=parseInt(x.getAttribute("data-col")||"0");i&&E&&R&&i({row:E,col:R})}},u=`square ${d?"light":"dark"} ${n?"valid-move":""} ${o?"selected":""}`;return e.jsxs("div",{className:u,onClick:h,onDragOver:a,onDrop:g,onTouchEnd:c,"data-row":t.row,"data-col":t.col,children:[s&&e.jsx(ne,{piece:s,onDragStart:m,onDragEnd:p}),n&&e.jsx("div",{className:"move-indicator"})]})},ce=({boardState:t,onSquareClick:s,onPieceDragStart:d,onPieceDragEnd:n,onSquareDrop:o,selectedPiece:r,validMoves:m=[],flipBoard:p=!1})=>{const i=(a,g)=>{const c={row:a,col:g},u=t.pieces.find(x=>x.position.row===a&&x.position.col===g),f=m.some(x=>x.row===a&&x.col===g),y=r?.position.row===a&&r?.position.col===g;return e.jsx(ae,{position:c,piece:u,isLight:(a+g)%2===0,isValidMove:f,isSelected:y,onClick:s,onPieceDragStart:d,onPieceDragEnd:n,onDrop:o},`${a}-${g}`)},h=()=>{const a=[],g=p?[1,2,3,4,5,6,7,8]:[8,7,6,5,4,3,2,1],c=p?[8,7,6,5,4,3,2,1]:[1,2,3,4,5,6,7,8];for(const u of g){const f=[];for(const y of c)f.push(i(u,y));a.push(e.jsx("div",{className:"board-row",children:f},u))}return a};return e.jsx("div",{className:"board-container",children:e.jsx("div",{className:"board",children:h()})})},le=({gameMode:t,difficulty:s,currentPlayer:d,gameStatus:n,resourcePoints:o,onModeChange:r,onDifficultyChange:m,onNewGame:p,onRestart:i})=>{const h=()=>{switch(n){case w.PLAYER_1_WIN:return"Player 1 Wins!";case w.PLAYER_2_WIN:return"Player 2 Wins!";case w.DRAW:return"Draw!";default:return`Current Player: Player ${d}`}};return e.jsxs("div",{className:"game-controls",children:[e.jsx("div",{className:"controls-header",children:e.jsx("h2",{children:"Strategic Board Game"})}),e.jsx("div",{className:"game-status",children:e.jsx("div",{className:`status-message ${n!==w.IN_PROGRESS?"game-over":""}`,children:h()})}),e.jsxs("div",{className:"resource-display",children:[e.jsxs("div",{className:"resource-item",children:[e.jsx("span",{className:"resource-label",children:"Player 1 Resources:"}),e.jsx("span",{className:"resource-value",children:o[b.PLAYER_1]})]}),e.jsxs("div",{className:"resource-item",children:[e.jsx("span",{className:"resource-label",children:"Player 2 Resources:"}),e.jsx("span",{className:"resource-value",children:o[b.PLAYER_2]})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"game-mode",children:"Game Mode:"}),e.jsxs("select",{id:"game-mode",value:t,onChange:a=>r(a.target.value),children:[e.jsx("option",{value:C.PVP,children:"Player vs Player"}),e.jsx("option",{value:C.AI,children:"Player vs AI"})]})]}),t===C.AI&&e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"difficulty",children:"Difficulty:"}),e.jsxs("select",{id:"difficulty",value:s,onChange:a=>m(a.target.value),children:[e.jsx("option",{value:M.EASY,children:"Easy"}),e.jsx("option",{value:M.HARD,children:"Hard"})]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{onClick:p,className:"control-button",children:"New Game"}),e.jsx("button",{onClick:i,className:"control-button",children:"Restart"})]})]})},ie=({moves:t,onMoveClick:s,onUndo:d})=>{const[n,o]=v.useState(!1),[r,m]=v.useState(1),p=(c,u)=>{const f=`P${c.piece.owner}`,y=i(c.piece.type),x=h(c.from),E=h(c.to),R=c.capturedPiece?" (capture)":"",N=c.isUpgrade?" (upgrade)":"";return`${u+1}. ${f}: ${y} ${x}→${E}${R}${N}`},i=c=>{switch(c){case S.PAWN:return"Pawn";case S.KNIGHT:return"Knight";case S.BISHOP:return"Bishop";case S.QUEEN:return"Queen"}},h=c=>`${["A","B","C","D","E","F","G","H"][c.col-1]}${c.row}`,a=()=>{if(d&&t.length>0){const c=Math.min(r,t.length,3);d(c)}},g=()=>{o(!n)};return e.jsxs("div",{className:`move-history ${n?"collapsed":""}`,children:[e.jsxs("div",{className:"move-history-header",children:[e.jsx("h3",{children:"Move History"}),e.jsx("button",{className:"collapse-button",onClick:g,children:n?"▼":"▲"})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"move-list",children:t.length===0?e.jsx("div",{className:"no-moves",children:"No moves yet"}):t.map((c,u)=>e.jsx("div",{className:"move-item",onClick:()=>s&&s(u),children:p(c,u)},u))}),t.length>0&&e.jsxs("div",{className:"undo-controls",children:[e.jsx("label",{htmlFor:"undo-count",children:"Undo moves:"}),e.jsxs("select",{id:"undo-count",value:r,onChange:c=>m(Number(c.target.value)),children:[e.jsx("option",{value:1,children:"1"}),e.jsx("option",{value:2,children:"2"}),e.jsx("option",{value:3,children:"3"})]}),e.jsx("button",{onClick:a,className:"undo-button",children:"Undo"})]})]})]})},de=({message:t,onClose:s})=>(v.useEffect(()=>{if(t){const d=setTimeout(()=>{s()},2e3);return()=>clearTimeout(d)}},[t,s]),t?e.jsx("div",{className:"error-tooltip",children:e.jsx("div",{className:"error-content",children:t})}):null),ue=()=>{const[t]=v.useState(()=>new X),[s,d]=v.useState(t.getGameState()),[n,o]=v.useState(t.getGameStatus()),[r,m]=v.useState(t.getMoveHistory()),[p,i]=v.useState(null),[h,a]=v.useState([]),[g,c]=v.useState(null),[u,f]=v.useState(C.PVP),[y,x]=v.useState(M.EASY),[E,R]=v.useState(null);v.useEffect(()=>{t.initializeGame({mode:u,difficulty:y}),N()},[]);const N=()=>{d(t.getGameState()),o(t.getGameStatus()),m(t.getMoveHistory())},T=l=>{const P=s.pieces.find(j=>j.position.row===l.row&&j.position.col===l.col);if(P&&P.owner===s.currentPlayer){i(P);const j=t.getValidMoves(P);a(j)}else p&&(h.some(A=>A.row===l.row&&A.col===l.col)?D(p.position,l):c("Invalid move"),i(null),a([]))},H=l=>{if(l.owner===s.currentPlayer){R(l),i(l);const P=t.getValidMoves(l);a(P)}},Y=()=>{},q=l=>{E&&(h.some(j=>j.row===l.row&&j.col===l.col)?D(E.position,l):c("Invalid move")),R(null),i(null),a([])},D=(l,P)=>{const j=t.attemptMove(l,P);j.valid?N():c(j.error||"Invalid move")},k=l=>{f(l),t.newGame({mode:l,difficulty:y}),N(),i(null),a([])},B=l=>{x(l),t.newGame({mode:u,difficulty:l}),N(),i(null),a([])},F=()=>{t.newGame({mode:u,difficulty:y}),N(),i(null),a([])},U=()=>{t.restartGame(),N(),i(null),a([])},V=l=>{t.undoMove(l),N(),i(null),a([])},W=l=>{console.log("Replay to move",l)},K=()=>{c(null)},Q=u===C.PVP&&s.currentPlayer===b.PLAYER_2;return e.jsxs("div",{className:"game-container",children:[e.jsx(de,{message:g,onClose:K}),e.jsxs("div",{className:"game-layout",children:[e.jsx("aside",{className:"game-sidebar",children:e.jsx(le,{gameMode:u,difficulty:y,currentPlayer:s.currentPlayer,gameStatus:n,resourcePoints:s.resourcePoints,onModeChange:k,onDifficultyChange:B,onNewGame:F,onRestart:U})}),e.jsx("main",{className:"game-main",children:e.jsx(ce,{boardState:s,onSquareClick:T,onPieceDragStart:H,onPieceDragEnd:Y,onSquareDrop:q,selectedPiece:p,validMoves:h,flipBoard:Q})}),e.jsx("aside",{className:"game-history",children:e.jsx(ie,{moves:r,onMoveClick:W,onUndo:V})})]})]})},me=()=>e.jsx("div",{className:"app",children:e.jsx(ue,{})}),I=document.getElementById("root");I&&G.createRoot(I).render(e.jsx(J.StrictMode,{children:e.jsx(me,{})}));
//# sourceMappingURL=index-BDkXvwKX.js.map
